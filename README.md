# Romano's System

## Tabla de contenido

1. [Descripción](#descripción)
2. [Guías de estilos](#guía-de-estilos)
3. [Tecnologías](#tecnologías)
4. [Scripts](#scripts)

## Descripción

Sistema de ventas para Romano's Pizza

## Guía de estilos

### Código PHP

Se utiliza "phpcs" para la documentación y el seguimiento de la guía de estilo. Se sigue la convención de php basada en la especificación [PSR-12](https://www.php-fig.org/psr/psr-12/ "PSR-12"). El archivo `phpcs.xml` contiene las configuraciones necesarias, así como el conjunto de reglas del estándar PSR-12 extraido del repositorio de "phpcs", que se encuentra en [phpcs PSR-12](https://github.com/squizlabs/PHP_CodeSniffer/blob/master/src/Standards/PSR12/ruleset.xml "phpcs PSR-12"). El archivo fue modificado para aceptar también el final de linea (EOL) utilizado en windows, además del basado en unix.

### Código JavaScript

Se utiliza "ESlint" para la documentación y el seguimiento de la guía de estilo indicada al desarrollar código en lenguaje JavaScript. Al utilizar el framework Vue.js, se sigue la especificación oficial encontrada en su [página](https://vuejs.org/style-guide/ "Vue.js"). En el archivo `.eslintrc.json` se encuentra el conjunto de reglas y configuraciones necesarias.

### Commits de GIT

Se sigue la siguiente convención:

1. Un encabezado con el titulo o un resumen del commit, describiendo la razón del commit. Debe comenzar por un sustantivo o un imperativo. No debe tener más de 50 caracteres.

2. Un cuerpo donde se describen todos los cambios realizados en el commit y su función. Se recomienda comenzar con un sustantivo o imperativo, pero es más flexible. Pueden haber varios parrafos de información, separados por lineas en blanco. Cada linea debe tener máximo 72 caracteres. Debe terminar en punto.

3. Referencias a issues que se están resolviendo en el commit o que están relacionados (opcional).

#### Forma

Forma y descripción de un commit válido, según los puntos anteriores (se encuentra en el idioma inglés).

```text
Short (50 chars or less) summary

More detailed explanatory text. Wrap it to 72 characters. The blank
line separating the summary from the body is critical (unless you omit
the body entirely).

Write your commit message in the imperative: "Fix bug" and not "Fixed
bug" or "Fixes bug." This convention matches up with commit messages
generated by commands like git merge and git revert.

Further paragraphs come after blank lines.

- Bullet points are okay, too.
- Typically a hyphen or asterisk is used for the bullet, followed by a
  single space. Use a hanging indent.

If you use an issue tracker, put references to them at the bottom,
like this:

Resolves: #123
See also: #456, #789
```

#### Ejemplos

```text
Fix typo in introduction to user guide
```

```text
Derezz the master control program

MCP turned out to be evil and had become intent on world domination.
This commit throws Tron's disc into MCP (causing its deresolution)
and turns it back into a chess game.
```

```text
Simplify serialize.h's exception handling

Remove the 'state' and 'exceptmask' from serialize.h's stream
implementations, as well as related methods.

As exceptmask always included 'failbit', and setstate was always
called with bits = failbit, all it did was immediately raise an
exception. Get rid of those variables, and replace the setstate
with direct exception throwing (which also removes some dead
code).

As a result, good() is never reached after a failure (there are
only 2 calls, one of which is in tests), and can just be replaced
by !eof().

fail(), clear(n) and exceptions() are just never called. Delete
them.
```

#### Véase también

<https://gist.github.com/robertpainsi/b632364184e70900af4ab688decf6f53>

<https://chris.beams.io/posts/git-commit/>

## Tecnologías

### Features

- VueJS
- Vuetify
- Vite
- Composer

El proyecto está desarrollado sobre el framework [Simple Framework](https://github.com/Goblins-Studios/simple-framework "Simple Framework").

El proyecto utiliza [NodeJS](https://nodejs.org/ "NodeJS"), en conjunto con la herramienta [Vite](https://vite.dev/ "Vite") y [Composer](https://getcomposer.org/ "Composer") para gestionar las tecnologías y dependencias de las bibliotecas utilizadas.

Realiza la instalación de las dependencia del proyecto y compilar los archivos mediante NodeJS, los cuales se pueden encontrar las instrucciones en la documentación oficial.

La carpeta donde se encuentra la mayoría de los archivos necesarios para desarrollar sobre NodeJS es "resources/src".

## Configuración inicial del proyecto

Para comenzar a utilizar el proyecto, puede ejecutar los comandos indicados en los siguientes apartados. El usuario por defecto al realizar el "Seeding" de la base de datos es 'admin' con la contraseña predeterminada '1234'.  

### Instalar dependencias de **Composer**

```bash
composer install
```

```bash
composer dump-autoload
```

### Instalar dependencias de **NodeJS**

```bash
npm install
```

```bash
npm run dev
```

### Configuración inicial de NodeJS

Para configurar NodeJS se utiliza el archivo `.env` en la raíz del proyecto mediante las variables de entorno necesarias que configuran a Vite, incluyendo el "Host" y la "URL" de la API. El archivo `.env.example` se puede encontrar como un ejemplo de archivo `.env`. Aunque es el mismo archivo que utiliza el código PHP, las variables de la App para Vite, deben llevar el prefijo "VITE_", por lo que se evita enviar al código del cliente las variables de entorno internas del servidor utilizadas para la API.

### Configuración inicial de la base de datos y el código PHP

La base de datos a utilizar debe ser configurada en el archivo `.env` del proyecto, así como otras características configurables desde ese archivo. El archivo `.env.example` se puede encontrar como un ejemplo de archivo `.env`.

Una vez realizada la configuración para la conexión con la base de datos, en caso de que sea nueva o no tenga la estructura necesaria para la aplicación, se pueden ejecutar scripts para crear el esquema (o "Schema") necesario de la base de datos, así como poblarlos con registros, mediante lo que se suele llamar "Seed". En la carpeta database se encuentran los archivos que contiene este esquema y estas semillas, con una finalidad similar a la que se pueden encontrar en marcos de trabajo más desarrollados con el uso de "migrations". Debido a esto, se puede encontrar la fecha de creación comentada al principio de los archivos indicados.

Los scripts necesarios están en los siguientes apartados, asi como en la correspondiente lista de scripts.

#### Construir esquema de base de datos

```bash
composer buildSchemaDatabase
```

#### Insertar registros en las tablas (Seed)

```bash
composer defaultSeedDatabase
```

## Scripts

Para la ejecución de scripts php se utilizan los scripts de composer configurados en el archivo json correspondiente.

En cada apartado se puede encontrar los scripts configurados en la aplicación y su utilización en la terminal de comandos mediante Composer.

### Eliminar archivos de desarrollo

Elimina los archivos y dependencias JavaScript innecesarias en el entorno de producción, una vez ha sido compilado lo necesario y se va a servir la aplicación.

```bash
composer deleteDevFiles
```

o

```bash
composer run-script deleteDevFiles
```

### Base de datos

Scripts relacionados con la base de datos

#### Crear esquema de base de datos

```bash
composer buildSchemaDatabase
```

#### Crear registros en las tablas (o Seed)

```bash
composer defaultSeedDatabase
```

### NodeJS

#### Construir la aplicación NodeJS en modo de desarrollo

```bash
npm run dev
```

#### Construir la aplicación NodeJS en modo de producción

```bash
npm run build
```

#### Servir la aplaicación NodeJS con cambios "en caliente"

```bash
npm run serve
```

#### Realizar la verificación del código JavaScript de NodeJS (lint)

```bash
npm run lint
```
